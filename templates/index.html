<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Server Status</title>
    <style>
        table {
            width: 100%;
            border-collapse: collapse;
        }
        table, th, td {
            border: 1px solid black;
        }
        th, td {
            padding: 8px;
            text-align: left;
        }
        .power-cycle-btn {
            color: red;
            cursor: pointer;
        }
        .hidden {
            display: none;
        }
    </style>
    <script>
        function showReasonInput(serverId) {
            const reasonDiv = document.getElementById('reason-' + serverId);
            if (reasonDiv.classList.contains('hidden')) {
                reasonDiv.classList.remove('hidden');
            } else {
                reasonDiv.classList.add('hidden');
            }
        }
    </script>
</head>
<body>
    <h1>Server Status for Server Group 1</h1>
    <table>
        <tr>
            <th>Server Name</th>
            <th>IP Address</th>
            <th>Status</th>
            <th>Action</th>
        </tr>
        {% for server_name, ip, status in servers1 %}
        <tr>
            <td>{{ server_name }}</td>
            <td>{{ ip }}</td>
            <td>{{ status }}</td>
            <td>
                <button class="power-cycle-btn" onclick="showReasonInput('{{ loop.index }}')">Power Cycle</button>
                <div id="reason-{{ loop.index }}" class="hidden">
                    <form action="/power_cycle/{{ ip }}" method="POST">
                        <textarea name="reason" rows="4" cols="50" placeholder="Enter reason for power cycle"></textarea><br>
                        <input type="submit" value="Submit">
                    </form>
                </div>
            </td>
        </tr>
        {% endfor %}
    </table>

    <h1>Server Status for Server Group 2</h1>
    <table>
        <tr>
            <th>Server Name</th>
            <th>IP Address</th>
            <th>Status</th>
            <th>Action</th>
        </tr>
        {% for server_name, ip, status in servers2 %}
        <tr>
            <td>{{ server_name }}</td>
            <td>{{ ip }}</td>
            <td>{{ status }}</td>
            <td>
                <button class="power-cycle-btn" onclick="showReasonInput('group2-{{ loop.index }}')">Power Cycle</button>
                <div id="reason-group2-{{ loop.index }}" class="hidden">
                    <form action="/power_cycle/{{ ip }}" method="POST">
                        <textarea name="reason" rows="4" cols="50" placeholder="Enter reason for power cycle"></textarea><br>
                        <input type="submit" value="Submit">
                    </form>
                </div>
            </td>
        </tr>
        {% endfor %}
    </table>

    <h1>Server Status for Server Group 3</h1>
    <table>
        <tr>
            <th>Server Name</th>
            <th>IP Address</th>
            <th>Status</th>
            <th>Action</th>
        </tr>
        {% for server_name, ip, status in servers3 %}
        <tr>
            <td>{{ server_name }}</td>
            <td>{{ ip }}</td>
            <td>{{ status }}</td>
            <td>
                <button class="power-cycle-btn" onclick="showReasonInput('group3-{{ loop.index }}')">Power Cycle</button>
                <div id="reason-group3-{{ loop.index }}" class="hidden">
                    <form action="/power_cycle/{{ ip }}" method="POST">
                        <textarea name="reason" rows="4" cols="50" placeholder="Enter reason for power cycle"></textarea><br>
                        <input type="submit" value="Submit">
                    </form>
                </div>
            </td>
        </tr>
        {% endfor %}
    </table>
</body>
</html>

